{% extends "common/base.html" %}
{% load static %}

{% block app_js %}
    <script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.3/jquery.scrollTo.min.js"></script>
    <script src="{% static 'js/authors.js' %}"></script>
{% endblock %}

{% block content %}

<h3>
  <strong>Authors</strong>
</h3>

<div class="card-columns custom-columns">
    {% for author in object_list %}
        <div class="card">
            <div class="card-body">
                <span class="anchor" id="{{ author.simple_slug}}"></span>
                <h5 class="card-title">{{ author.name }}</h5>
                {% if author.biography %}
                    <p class="card-text">{{author.biography}}</p>
                {% endif %}
                <hr>
                <small>
                <ul class="bios-list">
                    {% for biography in author.biographies.all %}
                    <li class="bios-list-item">
                        <a class="card-link" href="{% url 'biographies:show' bio_slug=biography.slug %}">{{ biography.title }}</a>
                        {% if biography.authors_connections.all.count > 1 %}
                            <ul class="other-authors-list">
                                {% for auth_conn in biography.authors_connections.all %}
                                    {% if auth_conn != author %}
                                    <li class="other-authors-list-item">with
                                        <span class="card-link font-italic author-link" data-hash="{{auth_conn.simple_slug}}">
                                            {{ auth_conn.name }}
                                        </span>
                                    </li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
                </small>
            </div>
        </div>
    {% empty %}
        <div class="item">
            No authors
        </div>
    {% endfor %}
</div>


{% endblock %}